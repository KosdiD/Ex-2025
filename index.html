<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>Smart Home XR</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <!-- A-Frame —Ç–∞ –ø–ª–∞–≥—ñ–Ω–∏ -->
    <script src="https://aframe.io/releases/1.7.1/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v7.5.4/dist/aframe-extras.min.js"></script>
    
    <!-- –®—Ä–∏—Ñ—Ç -->
    <a-assets>
        <a-asset-item id="arialFont" src="https://cdn.jsdelivr.net/gh/etiennepinchon/aframe-fonts/fonts/arial/arial-msdf.json"></a-asset-item>
    </a-assets>

    <!-- –°–∫—Ä–∏–ø—Ç–∏ -->
    <script src="scripts.js" defer></script>

    <style>
        body {
            margin: 0;
            background: black;
            font-family: sans-serif;
        }

        #height-controls, #save-btn {
            position: absolute;
            top: 20px;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px;
            border-radius: 10px;
            font-size: 14px;
        }

        #height-controls {
            left: 20px;
        }

        #save-btn {
            right: 20px;
        }

        #height-controls input {
            width: 50px;
        }

        #iot-info-panel {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px;
            color: white;
            border-radius: 5px;
            font-size: 13px;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <!-- –ö–æ–Ω—Ç—Ä–æ–ª—ñ –≤–∏—Å–æ—Ç–∏ -->
    <div id="height-controls">
        <strong>–í–∏—Å–æ—Ç–∞ –≥—Ä–∞–≤—Ü—è:</strong><br>
        <button onclick="changeHeight(-1)">‚Üì</button>
        <input type="number" id="height-input" value="10" min="0" max="50">
        <button onclick="changeHeight(1)">‚Üë</button>
        <button onclick="setHeight()">–í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏</button><br>
        <small>–ó–∞—Ä–∞–∑: <span id="current-height">10</span>–º</small>
    </div>

    <!-- –ö–Ω–æ–ø–∫–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø–æ–∑–∏—Ü—ñ—ó -->
    <button id="save-btn" onclick="saveCurrentPosition()">üìç –ó–±–µ—Ä–µ–≥—Ç–∏ –ø–æ–∑–∏—Ü—ñ—é</button>

    <!-- –ü–∞–Ω–µ–ª—å IoT -->
    <div id="iot-info-panel">
        <strong id="iot-title">IoT –ü—Ä–∏—Å—Ç—Ä—ñ–π</strong><br>
        <span id="iot-description">–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ –º–∞—Ä–∫–µ—Ä –¥–ª—è –±—ñ–ª—å—à–µ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó.</span>
    </div>

    <!-- XR —Å—Ü–µ–Ω–∞ -->
    <a-scene background="color: #87CEEB" fog="type: linear; color: #87CEEB; near: 10; far: 100">
        <!-- –ú–æ–¥–µ–ª—å –±—É–¥–∏–Ω–∫—É -->
        <a-assets>
            <a-asset-item id="house-model" src="box.glb"></a-asset-item>
        </a-assets>

        <a-light type="ambient" intensity="0.6"></a-light>
        <a-light type="directional" position="20 40 20" intensity="0.8" castShadow="true"></a-light>

        <!-- –ì—Ä—É–Ω—Ç -->
        <a-plane position="0 0 0" rotation="-90 0 0" width="200" height="200"
                 color="#4a5d4a" shadow="receive: true"></a-plane>

        <!-- –ë—É–¥–∏–Ω–æ–∫ -->
        <a-gltf-model src="#house-model" position="0 0 0" scale="1 1 1" rotation="0 0 0"
                      shadow="cast: true; receive: true" id="house">
        </a-gltf-model>

        <!-- –ö–∞–º–µ—Ä–∞ -->
        <a-entity id="rig" position="0 10 20" movement-controls="fly: false;">
            <a-entity id="camera"
                      camera
                      look-controls="pointerLockEnabled: true"
                      wasd-controls="acceleration: 25; fly: false"
                      position="0 1.6 0">
                <a-cursor fuse="false"
                          raycaster="objects: .iot-marker"
                          material="color: #00ff88; shader: flat">
                </a-cursor>
            </a-entity>
        </a-entity>

        <!-- –ü–æ—á–∞—Ç–∫–æ–≤–∏–π –º–∞—Ä–∫–µ—Ä -->
        <a-sphere class="iot-marker"
                  position="0 0 0"
                  radius="0.25"
                  color="#00bcd4"
                  event-set__enter="_event: mouseenter; scale: 1.3 1.3 1.3"
                  event-set__leave="_event: mouseleave; scale: 1 1 1">
        </a-sphere>

        <a-text value="–ü–æ—á–∞—Ç–∫–æ–≤–∏–π"
                font="#arialFont"
                position="0 0.5 0"
                width="4"
                align="center"
                color="#fff">
        </a-text>
    </a-scene>
</body>
</html>
